<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Status - JSON View</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prism@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        .json-container {
            background: #2d2d2d;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .status-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .status-badge {
            font-size: 1.2rem;
            padding: 0.8rem 2rem;
            border-radius: 30px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 10;
        }
        .api-info {
            background: rgba(0, 123, 255, 0.1);
            border-left: 4px solid #007bff;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <div class="status-header">
            <h1><i class="bi bi-code-slash"></i> Bot Status API</h1>
            <span class="badge status-badge bg-success">LIVE DATA</span>
        </div>

        <div class="api-info">
            <h5><i class="bi bi-info-circle me-2"></i>API Information</h5>
            <p class="mb-1"><strong>Endpoint:</strong> <code>GET /status</code></p>
            <p class="mb-1"><strong>Content-Type:</strong> application/json</p>
            <p class="mb-0"><strong>Auto-refresh:</strong> Every 10 seconds</p>
        </div>

        <div class="position-relative">
            <button class="btn btn-outline-light copy-btn" onclick="copyToClipboard()">
                <i class="bi bi-clipboard"></i> Copy JSON
            </button>
            <div class="json-container">
                <pre><code id="json-content" class="language-json">Loading...</code></pre>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h5><i class="bi bi-terminal me-2"></i>Quick Commands</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>curl</strong></p>
                        <code>curl -X GET http://localhost:5000/status | jq</code>
                        
                        <p class="mt-3"><strong>wget</strong></p>
                        <code>wget -qO- http://localhost:5000/status | python -m json.tool</code>
                        
                        <p class="mt-3"><strong>PowerShell</strong></p>
                        <code>Invoke-RestMethod -Uri http://localhost:5000/status</code>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h5><i class="bi bi-link me-2"></i>Related Endpoints</h5>
                    </div>
                    <div class="card-body">
                        <a href="/health" class="btn btn-outline-success btn-sm me-2 mb-2">
                            <i class="bi bi-heart-pulse"></i> Health Check
                        </a>
                        <a href="/metrics" class="btn btn-outline-info btn-sm me-2 mb-2">
                            <i class="bi bi-graph-up"></i> Metrics
                        </a>
                        <a href="/" class="btn btn-outline-primary btn-sm mb-2">
                            <i class="bi bi-house"></i> Dashboard
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prism@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prism@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        function fetchStatus() {
            fetch('/status')
                .then(response => response.json())
                .then(data => {
                    const formatted = JSON.stringify(data, null, 2);
                    document.getElementById('json-content').textContent = formatted;
                    Prism.highlightElement(document.getElementById('json-content'));
                })
                .catch(error => {
                    document.getElementById('json-content').textContent = 
                        JSON.stringify({error: 'Failed to fetch status', message: error.message}, null, 2);
                });
        }

        function copyToClipboard() {
            const content = document.getElementById('json-content').textContent;
            navigator.clipboard.writeText(content).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="bi bi-check"></i> Copied!';
                btn.classList.remove('btn-outline-light');
                btn.classList.add('btn-success');
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('btn-success');
                    btn.classList.add('btn-outline-light');
                }, 2000);
            });
        }

        // Initial load
        fetchStatus();
        
        // Auto-refresh every 10 seconds
        setInterval(fetchStatus, 10000);
    </script>
</body>
</html>
